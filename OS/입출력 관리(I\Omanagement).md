## OS - μ…μ¶λ ¥ κ΄€λ¦¬

![i/oStructure](https://velog.velcdn.com/images/yonii/post/007125a4-383e-4e7c-8b1b-dd53d096a32a/image.png)

μ»΄ν“¨ν„°μ μ£Όμ”ν• μ‘μ—…μ—λ” μ—°μ‚°μ‘μ—…κ³Ό **μ…μ¶λ ¥ μ‘μ—…** 2κ°€μ§€κ°€ μλ‹¤.  

κ·Έ μ¤‘ μ…μ¶λ ¥ μ‘μ—…μ€ μ»΄ν“¨ν„°μ— μ—°κ²°λ λ‹¤μ–‘ν• μ…μ¶λ ¥ ν•λ“μ›¨μ–΄ μ¥μΉλ“¤κ³Ό μ–΄λ–¤ μ‹μΌλ΅ μ†ν†µμ΄ μ΄λ£¨μ–΄μ§€λ”μ§€μ— κ΄€ν• λ‚΄μ©μ΄λ‹¤.

μλ¥Ό λ“¤μ–΄ λ§μ°μ¤, ν‚¤λ³΄λ“, λ¨λ‹ν„° λ“± λ‹¤μ–‘ν• μ¥μΉλ“¤μ΄ μ»΄ν“¨ν„°μ™€ μ λ™μ‘ν•κ² ν•λ ¤λ©΄ λ‘ μ‚¬μ΄μ— κ³µν†µλ μΈν„°νμ΄μ¤κ°€ μ΅΄μ¬ν•΄μ•Όν•λ‹¤.  

λ°”λ΅ **μ»΄ν“¨ν„°μ™€ ν•λ“μ›¨μ–΄ μ¥μΉ μ‚¬μ΄μ κ³µν†µλ μΈν„°νμ΄μ¤ μ—­ν• μ„ μν–‰ν•λ” κ²ƒμ΄ μ…μ¶λ ¥ κ΄€λ¦¬μ ν•µμ‹¬μ΄λ‹¤.**
<br></br>
## μ…μ¶λ ¥ ν•λ“μ›¨μ–΄μ κµ¬μ„±

ν•λ“μ›¨μ–΄ μ¥μΉλ” μΌ€μ΄λΈ”μ„ ν†µν•΄μ„ λλ” λ¬΄μ„ μΌλ΅ μ‹ νΈλ¥Ό λ³΄λƒ„μΌλ΅μ¨ μ»΄ν“¨ν„°μ™€ ν†µμ‹ ν•λ‹¤.  

μ΄λ• ν¬νΈλ¥Όν†µν•΄ μ»΄ν“¨ν„°μ— μ ‘μ†ν•λ”λ°, ν•λ“μ›¨μ–΄ μ¥μΉμ λλ‹¤λ¥Έ κµ¬μ„±μ”μ†λ” **μ μ–΄κΈ°**μ΄λ‹¤.  

(μ μ–΄κΈ°: ν¬νΈλ‚ μ…μ¶λ ¥ μ¥μΉλ¥Ό μ μ–΄ν•λ” μ „μνλ΅μ μ§‘ν•©μ²΄μ΄λ©° λ§μ€ μ…μ¶λ ¥ μ¥μΉλ” μ μ–΄κΈ°λ¥Ό λ‚΄μ¥ν•κ³  μλ‹¤.)

π¤”**κ·ΈλΌ μ»΄ν“¨ν„°λ” μ–΄λ–»κ² μ¥μΉμ μ μ–΄κΈ°μ—μ„ μ…μ¶λ ¥μ„ ν•λ„λ΅ λ…λ Ήν• κΉ?**

λ¨λ“  μ μ–΄κΈ°λ” λ μ§€μ¤ν„°λ¥Ό κ°€μ§„λ‹¤. μ»΄ν“¨ν„°μ ν”„λ΅μ„Έμ„λ” μ μ–΄κΈ° λ μ§€μ¤ν„°μ— bit patternμ„ μ“°κ±°λ‚ μ½μμΌλ΅μ¨ μ…μ¶λ ¥μ„ μ‹¤ν–‰ν•λ‹¤.  
<br></br>

## μ…μ¶λ ¥ ν•λ“μ›¨μ–΄μ λ™μ‘

**1. ν΄λ§**

μ¥μΉ μ μ–΄κΈ°μ λ μ§€μ¤ν„°μ—λ” busy bitλΌλ” κ²ƒμ΄ μ΅΄μ¬ν•λ‹¤.

**busy bit**: ν„μ¬ μ¥μΉκ°€ μ‚¬μ© κ°€λ¥ν• μƒνƒμΈμ§€, λ‹¤λ¥Έ μ‘μ—…μ„ μ²λ¦¬μ¤‘μ΄λΌ μ‚¬μ©μ΄ λ¶κ°€λ¥ν• μƒνƒμΈμ§€λ¥Ό λ‚νƒ€λ‚΄λ” bit.

> 1-> μ μ–΄κΈ°κ°€ μ‘μ—…ν•λλΌ λ°”μ κ²½μ°  
> 0-> μ μ–΄κΈ°κ°€ μ¤€λΉ„μ¤‘μΈ κ²½μ°

μ»΄ν“¨ν„°λ” μ¥μΉκ°€ μ‚¬μ©μ¤‘μΈμ§€ μ•κΈ°μ„ν•΄ μ£ΌκΈ°μ μΌλ΅ busy bitλ¥Ό κ²€μ‚¬ν•΄μ•Όν•λ”λ° μ΄ κ³Όμ •μ„ **ν΄λ§**μ΄λΌκ³  ν•λ‹¤.

> **ν΄λ§μ΄λ€ ν•λ“μ›¨μ–΄ μ¥μΉμ μƒνƒλ¥Ό μμ‹λ΅ μ²΄ν¬ν•μ—¬ λ…λ Ήμ„ λ°›μ„ μ μλ”μ§€λ¥Ό ν™•μΈν•λ” κ²ƒ**μ„ λ§ν•λ‹¤.

ν΄λ§ μμ²΄λ” μ»΄ν“¨ν„° μμ›μ΄ λ§μ΄ μ†μ”λμ§€ μ•μ§€λ§ μ¥μΉκ°€ μ¤€λΉ„ν•λ” μ‹κ°„μ΄ κΈΈμ–΄μ§ κ²½μ° λ§¤μ° λΉ„ν¨μ¨μ μ΄λΌλ” λ‹¨μ μ΄ μλ‹¤.  

μ΄λ° κ²½μ°μ— μ μ–΄κΈ°κ°€ μμ‹ μ μƒνƒκ°€ λ°”λ€” λ• μ»΄ν“¨ν„°μ— ν†µλ³΄ν•΄μ£Όλ” λ°©μ‹μΌλ΅ λΉ„ν¨μ¨μ„ λ§‰μ„ μ μλ‹¤.  

μ΄λ• λ°μƒμ‹ν‚¤λ” μ‹ νΈλ¥Ό **μΈν„°λ½νΈ**λΌκ³  ν•λ‹¤.  

**2.μΈν„°λ½νΈ**

>μΈν„°λ½νΈλ€ CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³  μμ„ λ•, μ…μ¶λ ¥ ν•λ“μ›¨μ–΄ λ“±μ μ¥μΉλ‚
>μμ™Έμƒν™©μ΄ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν•  κ²½μ°μ— CPUμ—κ² μ•λ ¤ μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” κ²ƒμ„ λ§ν•λ‹¤.

CPUλ” μΈν„°λ½νΈ μ”μ²­ λΌμΈμ΄λΌκ³  ν•λ” μ„ μ„ κ°€μ§€λ”λ° CPUλ” λ§¤λ² λ…λ Ήμ–΄λ¥Ό λλ‚΄κ³  λ‹¤μ λ…λ Ήμ–΄λ¥Ό μν–‰ν•κΈ° μ „μ— μ΄ μ„ μ„ κ²€μ‚¬ν•λ‹¤.  

λ§μ•½ μ…μ¶λ ¥ μ¥μΉκ°€ μ¤€λΉ„ μ™„λ£λμ–΄μ„ μΈν„°λ½νΈ μ”μ²­ λΌμΈμ— μ‹ νΈλ¥Ό λ³΄λ‚΄λ©΄, CPUλ” μΈν„°λ½νΈλ¥Ό ν™•μΈν•κ³  μΈν„°λ½νΈ ν•Έλ“¤λ¬λ¥Ό μ‹¤ν–‰ν•λ‹¤.  

(μΈν„°λ½νΈ ν•Έλ“¤λ¬: μ…μ¶λ ¥ μ¥μΉλ¥Ό μ„λΉ„μ¤ν•¨μΌλ΅μ¨, μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•΄μ¤€λ‹¤.)  

CPUλ” μΈν„°λ½νΈ λ°μƒμ‹ μ§μ „ μ‘μ—… μƒνƒλ¥Ό μ €μ¥ν•΄λ‘κ³  μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ‹¤.  

μΈν„°λ½νΈ μ²λ¦¬κ°€ μ™„λ£λ μ΄ν›„μ—λ” μΈν„°λ½νΈ λ°μƒμ „ μƒνƒλ¥Ό λ³µκµ¬μ‹μΌ μ¤‘λ‹¨λμ—λ μ‘μ—…μ„ μ¬κ°ν•λ‹¤.

>EX)  
>1. μ‚¬μ©μκ°€ ν‚¤λ³΄λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ…λ ¥ν•λ©΄ ν‚¤λ³΄λ“ μ»¨νΈλ΅¤λ¬κ°€ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹μΌ CPUμ—κ² κ·Έ μ‚¬μ‹¤μ„ μ•λ¦Ό.  
>
>2. CPUλ” ν„μ¬ μν–‰μ¤‘μ΄λ μ‘μ—…μ μƒνƒλ¥Ό μ €μ¥, μΈν„°λ½νΈ μ”μ²­μ„ μ²λ¦¬ν•κΈ°μ„ν•΄ μ΄μμ²΄μ  λ‚΄μ— μ •μλ ν‚¤λ³΄λ“ μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄μ„ μ°Ύμ  
>
>3. ν‚¤λ³΄λ“ μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•κ³  μ™„λ£.  
>
>4. μΈν„°λ½νΈ μ²λ¦¬κ°€ λλ‚λ©΄ μΈν„°λ½νΈκ°€ λ°μƒν•κΈ° μ§μ „ μƒνƒλ¥Ό λ³µκµ¬μ‹μΌ μ¤‘λ‹¨λμ—λ μ‘μ—…μ„ μ¬κ°.

<br></br>
## μ…μ¶λ ¥ ν•λ“μ›¨μ–΄μ™€ μ»΄ν“¨ν„°κ°€ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›λ” λ°©μ‹  

λ§μ•½ CPUλ¥Ό μ‚¬μ©ν•μ—¬ λ””μ¤ν¬μ™€ κ°™μ€ λ€μ©λ‰ μ…μ¶λ ¥ μ¥μΉμ λ°μ΄ν„°λ¥Ό μ½μΌλ©΄ CPU μ‚¬μ©λ‰μ΄  

λ§¤μ° λ†’μ•„μ Έ μ»΄ν“¨ν„° μ„±λ¥μ΄ μ‹¬κ°ν•κ² μ €ν•λλ‹¤λ” λ¬Έμ κ°€ λ°μƒν•λ‹¤. λ”°λΌμ„ CPUκ°€ λ§¤λ² λ°”μ΄νΈ μ „μ†΅μ„ μ μ–΄ν•λ” κ²ƒμ€ μ‹¬ν• λ‚­λΉ„μ΄λ‹¤.  

(PIO: CPUκ°€ 1λ°”μ΄νΈμ”© μ®κΈ°λ” μ…μ¶λ ¥ λ°©μ‹)  

λ§μ€ μ»΄ν“¨ν„°λ“¤μ CPUμ λ‚­λΉ„λ¥Ό λ§‰κΈ° μ„ν•΄μ„ PIOλ¥Ό DMA(Direct Memory Access)μ μ–΄κΈ°λΌκ³  λ¶λ¦¬λ” νΉμ ν”„λ΅μ„Έμ„μ—κ² μ„μ„ν•μ—¬ CPUμ μΌμ„ μ¤„μ—¬μ¤€λ‹¤.

**μ§μ ‘ λ©”λ¨λ¦¬ μ ‘κ·Ό(Direct Memory Access)**

![DMA](https://velog.velcdn.com/images%2Fyonii%2Fpost%2F1eae148f-27d5-479e-8b90-532ef28bb68a%2Fimage.png)  

μ»΄ν“¨ν„°λ” λ©”λ¨λ¦¬μ— DMA λ…λ Ή λΈ”λ΅μ„ μ“΄λ‹¤. μ΄ λΈ”λ΅μ—λ” μ „μ†΅ν•  λ°μ΄ν„°κ°€ μλ” κ³³μ ν¬μΈν„°μ™€  

μ „μ†΅ν•  μ¥μ†μ— λ€ν• ν¬μΈν„°, κ·Έλ¦¬κ³  μ „μ†΅λ  λ°”μ΄νΈ μκ°€ κΈ°λ΅λλ‹¤.  

CPUλ” DMA λ…λ ΉλΈ”λ΅μ μ£Όμ†λ¥Ό DMAμ—κ² μ•λ ¤μ£Όκ³  μμ‹ μ€ λ‹¤λ¥Έ μΌμ„ μ²λ¦¬ν•λ‹¤.  

μ¦‰ **DMAλ” CPUμ λ„μ›€μ—†μ΄ μμ‹ μ΄ μ§μ ‘ λ²„μ¤λ¥Ό ν†µν•΄ DMA λ…λ ΉλΈ”λ΅μ— μ ‘κ·Όν•μ—¬ μ…μ¶λ ¥μ„ μ‹¤ν–‰**ν•λ‹¤.

>**DMA μ…μ¶λ ¥ λ°©μ‹μ μ‘λ™ κ³Όμ •**
>
>1. CPUκ°€ μ…μ¶λ ¥ μ”μ²­μ„ λ³΄λ‚Έλ‹¤.
>
>2. DMAμ μ–΄κΈ°μ λ μ§€μ¤ν„°μ— μ£Όμ†μ™€ μ „μ†΅ κΈΈμ΄κ°€ μ €μ¥λλ‹¤.
>
>3. DMA μ μ–΄κΈ°λ” ν• λΈ”λ΅μ μ…μ¶λ ¥ λ™μ‘μ„ μν–‰ν•κ³  κ·Έλ™μ• CPUλ” λ‹¤λ¥Έ μ‘μ—…μ„ ν•λ‹¤.
>
>4. μ…μ¶λ ¥ λ™μ‘μ΄ μ™„λ£λλ©΄ DMAμ μ–΄κΈ°λ” CPUμ—κ² μ™„λ£ν–λ‹¤λ” μΈν„°λ½νΈλ¥Ό λ³΄λ‚Έλ‹¤.

# μ¶μ²
* https://velog.io/@yonii/OS-%EC%9E%85%EC%B6%9C%EB%A0%A5-%EA%B4%80%EB%A6%AC
